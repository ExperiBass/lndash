tr(class="word-wrap")
	th.text-end #{(channel_index + offset + 1).toLocaleString()}

	td.table-col-channelid
		.mb-2
			if (channel.active)
				+pillBadgeSuccess("Active")
				
			else if (channel.chan_id)
				if (channel.close_type)
					span.badge.text-bg-danger.border-dotted(title=`Close type: ${channel.close_type}`, data-bs-toggle="tooltip") Closed

				else
					+pillBadgeWarning("Inactive")

			else
				if (pendingOpenChannels.includes(channel))
					+pillBadgeWarning("Opening")

				if (pendingCloseChannels.includes(channel))
					+pillBadgeDanger("Closing")

				if (pendingForceCloseChannels.includes(channel))
					+pillBadgeDanger("Force Closing")

				if (waitingCloseChannels.includes(channel))
					+pillBadgeWarning("Waiting to Close")


			if (channel.private)
				+pillBadgeLight
					span.me-1 Private
					i.fas.fa-lock.text-success

			else
				+pillBadgeWarning
					span.me-1 Public
					i.fas.fa-eye


		if (channel.active || (channel.chan_id && !channel.close_type))
			a(href=("/channel/" + channel.chan_id))
				- var channel_id = channel.chan_id;
				include ./channel-id.pug

			if (utils.isObjectStarred(`channel:${channel_id}`))
				i.fas.fa-star.text-warning.ms-1(title="This is one of your favorite channels" data-bs-toggle="tooltip")

		else if (channel.chan_id)
			span
				- var channel_id = channel.chan_id;
				include ./channel-id.pug

				if (utils.isObjectStarred(`channel:${channel_id}`))
					i.fas.fa-star.text-warning.ms-1(title="This is one of your favorite channels" data-bs-toggle="tooltip")

		else
			span -


		if (pendingOpenChannels.includes(channel))
			.mt-3
				div Opening tx:
				- var btc_txid = channel.channel.channel_point.substring(0, channel.channel.channel_point.indexOf(":"));
				- var outpoint_output_index = channel.channel.channel_point.substring(channel.channel.channel_point.indexOf(":") + 1);

				if (config.blockExplorerUrl)
					a(href=`${config.blockExplorerUrl}/tx/${btc_txid}` target="_blank" title=btc_txid data-bs-toggle="tooltip")
						include ./btc-txid.pug
					span  [#{outpoint_output_index}]

				else
					span(title=btc_txid data-bs-toggle="tooltip")
						include ./btc-txid.pug
					span  [#{outpoint_output_index}]



		

	td
		if (channel.remote_pubkey)
			- var card_node_pubkey = channel.remote_pubkey;
			
		else if (channel.channel.remote_node_pub)
			- var card_node_pubkey = channel.channel.remote_node_pub;

		include ./node-card.pug

	if (false)
		td.text-end
			if (config.blockExplorerUrl && parsedChannelIds[channel.chan_id].blockHeight > 0)
				a(href=`${config.blockExplorerUrl}/block-height/${parsedChannelIds[channel.chan_id].blockHeight}` target="_blank") #{parsedChannelIds[channel.chan_id].blockHeight.toLocaleString()}

			else
				if (parsedChannelIds[channel.chan_id].blockHeight > 0)
					span #{parsedChannelIds[channel.chan_id].blockHeight.toLocaleString()}
				else
					span -

	

	td.text-end
		.d-flex.flex-row-reverse
			div
				if (channel.active)
					- var currencyValue = new Decimal(channel.local_balance).dividedBy(coinConfig.baseCurrencyUnit.multiplier);
					include ./value-display.pug

				else if (channel.channel != null)
					.text-muted
						- var currencyValue = new Decimal(channel.channel.local_balance).dividedBy(coinConfig.baseCurrencyUnit.multiplier);
						include ./value-display.pug

				else
					span -

				br

				if (channel.active)
					- var currencyValue = new Decimal(channel.remote_balance).dividedBy(coinConfig.baseCurrencyUnit.multiplier);
					include ./value-display.pug
					
					if (false)
						.row
							.col-md-6.text-end
								- var currencyValue = new Decimal(channel.local_balance).dividedBy(coinConfig.baseCurrencyUnit.multiplier);
								include ./value-display.pug

							.col-md-6.text-end
								- var currencyValue = new Decimal(channel.remote_balance).dividedBy(coinConfig.baseCurrencyUnit.multiplier);
								include ./value-display.pug

						- var fullPercent = new Decimal(100 * parseFloat(channel.local_balance) / (parseFloat(channel.local_balance) + parseFloat(channel.remote_balance))).toDecimalPlaces(1);

						.progress.mt-2(style="height: 6px;")
							div(class="progress-bar", role="progressbar", style=("width: " + fullPercent + "%;"), aria-valuenow=parseInt(fullPercent), aria-valuemin="0", aria-valuemax="100")

				else if (channel.channel != null)
					.text-muted
						- var currencyValue = new Decimal(channel.channel.remote_balance).dividedBy(coinConfig.baseCurrencyUnit.multiplier);
						include ./value-display.pug

				else
					span -

			.me-2
				span.badge.text-bg-primary.me-1 Spendable
				br
				span.badge.text-bg-info.me-1 Receivable


	td.text-end
		.d-flex.flex-row-reverse
			div
				if (channel.active)
					div
						- var currencyValue = new Decimal(channel.total_satoshis_received).dividedBy(coinConfig.baseCurrencyUnit.multiplier);
						span
							include ./value-display.pug


					div
						- currencyValue = new Decimal(channel.total_satoshis_sent).dividedBy(coinConfig.baseCurrencyUnit.multiplier);
						span
							span -
							include ./value-display.pug

				else
					span -

			.me-2
				span.badge.text-bg-success.me-1 Received
				br
				span.badge.text-bg-danger.me-1 Sent



	td.table-col-time
		if (channel.active && fullNetworkDescription.channelsById[channel.chan_id])
			- var lastUpdateTime = fullNetworkDescription.channelsById[channel.chan_id].last_update;
			- var timeAgo = moment.duration(moment.utc(new Date()).diff(moment.utc(new Date(parseInt(lastUpdateTime) * 1000))));
			- var dateTimeUtc = moment.utc(new Date(parseInt(lastUpdateTime) * 1000)).format("Y-MM-DD HH:mm:ss");

			span.border-dotted(data-bs-toggle="tooltip", title=`${dateTimeUtc} utc`) #{timeAgo.humanize()}

		else
			span -

	td
		a.btn.btn-sm.btn-primary(href="javascript:void(0)" data-bs-toggle="modal" data-bs-target=("#localChannelModal-" + localChannel_index))
			i.fas.fa-file-lines
		